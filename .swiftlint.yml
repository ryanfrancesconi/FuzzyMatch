####################################################################
# DO NOT EDIT THIS FILE
# This is a master file maintained in https://github.com/ordo-one/internal-repository-templates
#
# Add overrides into `.swiftlint_refinement.yml` in specific source directory.
#
# Documentation is under https://github.com/realm/SwiftLint
####################################################################

child_config: .swiftlint_refinement.yml

only_rules:
  # default:
  - attribute_name_spacing
  - class_delegate_protocol
  - closing_brace
  - closure_parameter_position
  - colon
  - comma
  - comment_spacing
  - computed_accessors_order
  - control_statement
  - custom_rules
  - deployment_target
  - duplicate_imports
  - empty_parameters
  - empty_parentheses_with_trailing_closure
  - implicit_getter
  - invalid_swiftlint_command
  - leading_whitespace
  - line_length
  - mark
  - opening_brace
  - function_name_whitespace
  - orphaned_doc_comment
  - prefer_type_checking
  - private_over_fileprivate
  - private_unit_test
  - protocol_property_accessors_order
  - redundant_discardable_let
  - redundant_objc_attribute
  - redundant_sendable
  - redundant_set_access_control
  - redundant_void_return
  - return_arrow_whitespace
  - statement_position
  - superfluous_disable_command
  - switch_case_alignment
#  - trailing_comma
  - trailing_newline
  - trailing_whitespace
  - unavailable_condition
  - unneeded_break_in_switch
  - unneeded_override
  - unused_control_flow_label
  - vertical_parameter_alignment
  - identifier_name

# Paths to ignore during linting.
# Cannot exclude wildcards
# https://github.com/realm/SwiftLint/pull/3534
excluded:
  - .build

analyzer_rules:
  - unused_import

line_length:
  warning: 140
  error: 140
  ignores_comments: true
  ignores_urls: true
  ignores_function_declarations: true
  ignores_interpolated_strings: true

identifier_name:
  excluded: [id, up, in, at, of, to, a, b, c, d, i, j, k, x, y, dx, dy, u, v]
  max_length: 60
  allowed_symbols: [_]

custom_rules:
  unbounded_buffer_policy:
    regex: bufferingPolicy:\s*\.unbounded
    message: "Unbounded queue"

  unbounded_buffer_over_1k:
    # Buffer over 1k, for example bufferingPolicy: .bufferingNewest(1_025)
    regex: bufferingPolicy:\s*\.buffering\w+\((1_02[5-9]|1_0[3-9][0-9]|1_[1-9][0-9][0-9]|[2-9]_[0-9][0-9][0-9])\)
    message: "Big queue (over 1025)"

  unbounded_buffer_over_10k:
    # Buffer over 10k, for example bufferingPolicy: .bufferingNewest(10_000)
    regex: bufferingPolicy:\s*\.buffering\w+\(\d{2,}_\d+\)
    message: "Very big queue (over 10k)"

  discouraged_get_function_name:
    regex: func get
    message: "Don't use \"get\" in function names"

  discouraged_impl_name:
    regex: (enum|struct|class) \w+Impl
    message: "Don't use \"Impl\" in enum/struct/class names"
